<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Éditeur Webtoon</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/svg+xml" href="{{ url_for('static', filename='favicon.svg') }}">
</head>
<body>
    <div class="app">
        <!-- Sidebar Projet -->
        <aside id="project-sidebar" class="sidebar project" data-visible="false">
            <h3><i class="fas fa-folder-open"></i> Projet</h3>
            <p id="block-count" class="stat-counter">0 blocs</p>
            <div class="button-group">
                <button id="btn-export"><i class="fas fa-download"></i> Export</button>
                <button id="btn-import"><i class="fas fa-upload"></i> Import</button>
                <input id="file-import" type="file" accept=".wtoon,.json" style="display: none;">
                <button id="btn-reset" class="btn-warning"><i class="fas fa-trash-alt"></i> Reset</button>
            </div>
            <hr>
            <h4><i class="fas fa-tags"></i> Types de blocs</h4>
            <div class="types-manager">
                <button id="btn-add-type" class="btn-primary"><i class="fas fa-plus-circle"></i> Nouveau Type</button>
                <div class="types-list">
                    <div id="custom-types-container" class="types-chips">
                        <!-- Les types personnalisés seront affichés ici -->
                        <p class="info-text">Aucun type personnalisé</p>
                    </div>
                </div>
            </div>
            <hr>
            <h4><i class="fas fa-file-upload"></i> Fichier Webtoon</h4>
            <div class="file-manager">
                <button id="btn-upload-image" class="btn-primary"><i class="fas fa-image"></i> Importer Image</button>
                <button id="btn-upload-pdf" class="btn-primary"><i class="fas fa-file-pdf"></i> Importer PDF</button>
                <input id="file-upload-image" type="file" accept="image/*" style="display: none;">
                <input id="file-upload-pdf" type="file" accept=".pdf" style="display: none;">
            </div>
            <hr>
            <h4><i class="fas fa-globe"></i> Extraction Webtoon</h4>
            <div class="webtoon-extractor">
                <div class="input-wrapper">
                    <input type="text" id="webtoon-url" placeholder="URL du webtoon à extraire">
                </div>
                <button id="btn-extract-webtoon" class="btn-primary"><i class="fas fa-download"></i> Extraire</button>
                <div id="extraction-status" class="status-message"></div>
                <div id="extraction-progress" class="progress-bar-container">
                    <div class="progress-bar"></div>
                </div>
                <div id="extracted-images-container" class="extracted-images">
                    <!-- Les images extraites seront affichées ici -->
                </div>
            </div>
        </aside>

        <!-- Main Content with Resizable Panels -->
        <div class="content-wrapper">
            <!-- Viewer Panel (for PDF/Images) -->
            <div id="viewer-panel" class="viewer-panel">
                <div class="viewer-header">
                    <button id="btn-close-viewer" class="btn-icon"><i class="fas fa-times"></i></button>
                    <span id="viewer-filename">Aucun fichier</span>
                </div>
                <div class="viewer-content">
                    <div id="pdf-container"></div>
                    <div id="image-container">
                        <img id="image-viewer" style="display: none;">
                    </div>
                </div>
                <div class="viewer-controls">
                    <button id="btn-prev-page" class="btn-icon" disabled><i class="fas fa-chevron-left"></i></button>
                    <span id="page-info">Page: 0/0</span>
                    <button id="btn-next-page" class="btn-icon" disabled><i class="fas fa-chevron-right"></i></button>
                    <button id="btn-zoom-in" class="btn-icon"><i class="fas fa-search-plus"></i></button>
                    <button id="btn-zoom-out" class="btn-icon"><i class="fas fa-search-minus"></i></button>
                </div>
            </div>
            
            <!-- Resizer Handle -->
            <div id="resizer" class="resizer"></div>

            <!-- Main Content -->
            <main class="main">
                <header>
                    <button id="btn-toggle-project"><i class="fas fa-bars"></i></button>
                    <h2><i class="fas fa-edit"></i> Éditeur Webtoon</h2>
                    <button id="btn-toggle-tools"><i class="fas fa-tools"></i></button>
                </header>

                <!-- Liste des blocs -->
                <div class="scroll" id="blocks-container">
                    <!-- Blocks will be rendered here -->
                </div>

                <!-- Barre d'outils -->
                <footer id="block-types-buttons">
                    <!-- Block type buttons will be added here -->
                    <button id="btn-undo" disabled><i class="fas fa-undo"></i> Annuler</button>
                    <button id="btn-docx"><i class="fas fa-file-word"></i> DOCX</button>
                    <button id="btn-spellcheck"><i class="fas fa-spell-check"></i> Ortho</button>
                    <button id="btn-theme"><i class="fas fa-moon"></i></button>
                </footer>
            </main>
        </div>

        <!-- Sidebar Outils -->
        <aside id="tools-sidebar" class="sidebar tools" data-visible="false">
            <h3><i class="fas fa-sliders-h"></i> Outils</h3>
            <label class="input-label">
                <i class="fas fa-key"></i> Clé Gemini
                <div class="input-wrapper">
                    <input type="password" id="gemini-key">
                    <span class="input-icon"><i class="fas fa-lock"></i></span>
                </div>
            </label>
            <hr>
            <h4><i class="fas fa-check-circle"></i> Rapport orthographe</h4>
            <div id="spellcheck-result" class="report-container">
                <p>Aucun rapport.</p>
            </div>
        </aside>
    </div>

    <!-- Block Template (hidden) -->
    <template id="block-template">
        <div class="block">
            <strong></strong>
            <textarea rows="2" spellcheck="true" placeholder="Entrez votre contenu ici..."></textarea>
            <div class="block-actions">
                <button class="ai-btn" title="Suggestions IA"><i class="fas fa-robot"></i></button>
                <button class="comment-btn" title="Ajouter un commentaire"><i class="fas fa-comment"></i></button>
                <button class="delete-btn" title="Supprimer ce bloc"><i class="fas fa-trash-alt"></i></button>
            </div>
            <div class="comment-container" style="display: none;">
                <textarea class="comment-textarea" rows="1" placeholder="Commentaire (non inclus dans l'export Word)..."></textarea>
            </div>
            <div class="suggestions" style="display: none;">
                <!-- AI suggestions will be added here -->
            </div>
        </div>
    </template>

    <!-- Extracted Image Template -->
    <template id="extracted-image-template">
        <div class="extracted-image-item">
            <img src="" alt="Extracted Image" class="thumbnail">
            <div class="image-actions">
                <button class="view-btn" title="Voir l'image"><i class="fas fa-eye"></i></button>
                <button class="use-btn" title="Utiliser cette image"><i class="fas fa-check"></i></button>
            </div>
        </div>
    </template>

    <script src="{{ url_for('static', filename='js/lib/pdf.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html> 